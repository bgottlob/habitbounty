{
  "swagger": "2.0",
  "info": {
    "title": "HabitBounty API",
    "description": "Build personal habits and save up money at the same time!",
    "version": "0.0.0"
  },
  "host": "localhost:8080",
  "schemes": [ "http" ],
  "produces": [ "application/json" ],
  "paths": {
    "/all-habits": {
      "get": {
        "summary": "All Habits",
        "description": "The All Habits endpoint returns information about the active habits for the user. The response includes the display name, amount amount, and a log of dates completed.",
        "tags": [ "Habits" ],
        "responses": {
          "200": {
            "description": "An array of habits",
            "schema": {
              "title": "Habit Array",
              "type": "array",
              "items": {
                "title": "Habit",
                "$ref": "#/definitions/Habit"
              }
            }
          },
          "404": {
            "description": "Content not found"
          }
        }
      }
    },
    "/all-expenses": {
      "get": {
        "summary": "All Expenses",
        "description": "The All Expenses endpoint returns information about expenses. The response includes the display name, charge amount, and the date charged for each (if applicable).",
        "tags": [ "Expenses" ],
        "responses": {
          "200": {
            "description": "An array of expenses",
            "schema": {
              "title": "Expense Array",
              "type": "array",
              "items": {
                "title": "Expense",
                "$ref": "#/definitions/Expense"
              }
            }
          },
          "404": {
            "description": "Content not found"
          }
        }
      }
    },
    "/balance": {
      "get": {
        "summary": "Balance",
        "description": "The Balance endpoint returns the current balance of the user.",
        "tags": [ "Balance" ],
        "responses": {
          "200": {
            "description": "A balance amount",
            "schema": {
              "type": "object",
              "properties": {
                "balance": {
                  "type": "number",
                  "format": "float",
                  "description": "The dollar amount of the user's current balance."
                }
              }
            }
          },
          "400": {
            "description": "Unexpected error",
            "schema": {
              "$ref": "#/definitions/Error"
            }
          }
        }
      }
    },
    "/habit/{habitId}": {
      "get":{
        "summary": "Get Habit",
        "description": "The Get Habit endpoint returns information about a habit.",
        "tags": ["Habits"],
        "parameters": [
          {
            "name": "habitId",
            "in": "path",
            "description": "The ID of the habit to be returned.",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "The information about a habit.",
            "schema": {
              "title": "Habit Data",
              "type": "object",
              "$ref": "#/definitions/Habit"
            }
          }
        }
      }
    },
    "/complete-habit": {
      "post": {
        "summary": "Complete Habit",
        "description": "Marks a habit for completion or uncompletion on a given date.",
        "tags": ["Habits"],
        "parameters": [
          {
            "name": "id",
            "in": "body",
            "description": "The ID of the habit to be (un)completed",
            "required": true,
            "type": "string"
          },
          {
            "name": "rev",
            "in": "body",
            "description": "The revision ID of the habit to be (un)completed",
            "required": true,
            "type": "string"
          },
          {
            "name": "date",
            "in": "body",
            "description": "The date the habit should be marked for (un)completion",
            "required": true,
            "type": "string",
            "format": "date"
          },
          {
            "name": "set",
            "in": "body",
            "description": "Flag that indicates whether to complete or uncomplete the habit",
            "required": true,
            "type": "boolean"
          }
        ],
        "responses": {
          "200": {
            "description": "The habit was (un)completed successfully",
            "schema": {
              "description": "The most up to date habit information and balance. Both will change when the complete habit request is processed",
              "type": "object",
              "properties": {
                "habit": {
                  "description": "The updated habit information",
                  "$ref": "#/definitions/Habit"
                },
                "balance": {
                  "type": "number",
                  "format": "float",
                  "description": "The updated balance"
                }
              }
            }
          }
        }
      }
    },
    "/charge-expense": {
      "post": {
        "summary": "Charge Expense",
        "description": "(Un)charges an expense, which has the effect of subtracting the amount of the expense from the balance.",
        "tags": ["Expenses"],
        "parameters": [
          {
            "name": "id",
            "in": "body",
            "required": true,
            "description": "The ID of the expense to be (un)charged",
            "type": "string"
          },
          {
            "name": "rev",
            "in": "body",
            "required": true,
            "description": "The revision ID of the expense to be (un)charged",
            "type": "string"
          },
          {
            "name": "dateCharged",
            "in": "body",
            "required": true,
            "description": "The date of the expense to be charged. If this parameter is null, the expense will be uncharged. If it is a date string, it will be charged.",
            "type": "string",
            "format": "date"
          }
        ],
        "responses": {
          "200": {
            "description": "The expense was (un)charged successfully",
            "schema": {
              "type": "object",
              "description": "The most up to date expense information and balance",
              "properties": {
                "expense": {
                  "description": "The updated balance",
                  "$ref": "#/definitions/Expense"
                },
                "balance": {
                  "description": "The updated balance",
                  "type": "number",
                  "format": "float"
                }
              }
            }
          }
        }
      }
    },
    "/change-balance": {
      "post": {
        "summary": "Change Balance",
        "description": "Modifies the balance by some dollar amount",
        "tags": ["Balance"],
        "parameters": [
          {
            "name": "amount",
            "in": "body",
            "description": "The dollar amount to change the balance by",
            "required": true,
            "type": "number",
            "format": "float"
          }
        ],
        "responses": {
          "200": {
            "description": "The balance was successfully changed by the given amount",
            "schema": {
              "description": "The updated balance",
              "type": "object",
              "properties": {
                "balance": {
                  "type": "number",
                  "format": "float"
                }
              }
            }
          }
        }
      }
    },
    "/edit-habit": {
      "post": {
        "summary": "Edit Habit",
        "description": "Modifies the information associated with a habit",
        "tags": ["Habits"],
        "parameters": [
          {
            "name": "id",
            "in": "body",
            "required": true,
            "description": "The ID of the habit to be modified",
            "type": "string"
          },
          {
            "name": "rev",
            "in": "body",
            "required": true,
            "description": "The revision ID of the habit to be modified",
            "type": "string"
          },
          {
            "name": "name",
            "in": "body",
            "description": "The new name of the habit",
            "type": "string"
          },
          {
            "name": "amount",
            "in": "body",
            "description": "The new amount of the habit",
            "type": "number",
            "format": "float"
          }
        ],
        "responses": {
          "200": {
            "description": "The habit information was changed successfully",
            "schema": {
              "description": "The most up to date habit information",
              "type": "object",
              "$ref": "#/definitions/Habit"
            }
          }
        }
      }
    },
    "/expense": {
      "put": {
        "summary": "Create Expense",
        "description": "Creates a new expense",
        "tags": ["Expenses"],
        "parameters": [
          {
            "name": "name",
            "description": "The name of the expense to be created",
            "in": "body",
            "type": "string"
          },
          {
            "name": "amount",
            "in": "body",
            "description": "The dollar amount of the expense to be created",
            "type": "number",
            "format": "float"
          }
        ],
        "responses": {
          "200": {
            "description": "The expense was created successfully",
            "schema": {
              "description": "The new expense's information",
              "type": "object",
              "$ref": "#/definitions/Expense"
            }
          }
        }
      }
    },
    "/habit": {
      "delete": {
        "summary": "Delete Habit",
        "description": "Deletes a habit (marks it as inactive, but does not delete its actual database record)",
        "tags": ["Habits"],
        "parameters": [
          {
            "name": "id",
            "in": "body",
            "description": "The ID of the habit to be deleted",
            "required": true,
            "type": "string"
          },
          {
            "name": "id",
            "in": "body",
            "description": "The revision ID of the habit to be deleted",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "The habit was inactivated",
            "schema": {
              "description": "The inactivated habit's information",
              "type": "object",
              "$ref": "#/definitions/Habit"
            }
          }
        }
      },
      "put": {
        "summary": "Create Habit",
        "description": "Creates a new habit",
        "tags": ["Habits"],
        "parameters": [
          {
            "name": "name",
            "description": "The name of the habit to be created",
            "required": true,
            "in": "body",
            "type": "string"
          },
          {
            "name": "amount",
            "in": "body",
            "required": true,
            "description": "The dollar amount of the amount for the habit to be created",
            "type": "number",
            "format": "float"
          }
        ],
        "responses": {
          "200": {
            "description": "The habit was created successfully",
            "schema": {
              "description": "The new habit's information",
              "type": "object",
              "$ref": "#/definitions/Habit"
            }
          }
        }
      }
    }
  },
  "definitions": {
    "Habit": {
      "type": "object",
      "required": [ "id", "rev", "name", "amount", "log" ],
      "properties": {
        "name": {
          "type": "string",
          "description": "The name text of habit."
        },
        "amount": {
          "type": "number",
          "format": "float",
          "description": "The dollar amount rewarded when completing the habit. Decimal numbers more precise than one cent will be truncated."
        },
        "log": {
          "type": "array",
          "description": "A list of log entries indicating when the habit was completed.",
          "items": {
            "$ref": "#/definitions/LogEntry"
          }
        },
        "id": {
          "type": "string",
          "description": "A unique identifier for the habit."
        },
        "rev": {
          "type": "string",
          "description": "Identfies the revision number of the habit data."
        }
      }
    },
    "LogEntry": {
      "type": "object",
      "required": [ "date", "amount" ],
      "properties": {
        "date": {
          "type": "string",
          "format": "date",
          "description": "The date the habit was completed on."
        },
        "amount": {
          "type": "number",
          "format": "float",
          "description": "The dollar amount rewarded when completing the habit on this date."
        }
      }
    },
    "Expense": {
      "type": "object",
      "required": [ "id", "rev", "name", "amount" ],
      "properties": {
        "name": {
          "type": "string",
          "description": "The name of the expense."
        },
        "amount": {
          "type": "number",
          "format": "float",
          "description": "The dollar amount subtracted when this expense is charged."
        },
        "dateCharged": {
          "type": "string",
          "format": "date",
          "description": "The date the expense was charged, if it has been charged."
        },
        "id": {
          "type": "string",
          "description": "A unique identifier for the habit."
        },
        "rev": {
          "type": "string",
          "description": "Identfies the revision number of the habit data."
        }
      }
    }
  }
}
